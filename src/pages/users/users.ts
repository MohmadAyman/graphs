import { Component, OnInit } from "@angular/core";
import { IonicPage, NavController, NavParams } from "ionic-angular";

/**
 * Generated class for the UsersPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */

@IonicPage()
@Component({
  selector: "page-users",
  templateUrl: "users.html"
})
export class UsersPage implements OnInit {
  constructor(public navCtrl: NavController, public navParams: NavParams) {}

  ionViewDidLoad() {
    console.log("ionViewDidLoad UsersPage");
  }

  rouiter: string = 'egts';
  options;
  data;
  chartType;
  received_json;
  graph_x = [];

  ngOnInit() {
    
    this.options = {
      chart: {
        type: "lineChart",
        height: 450,
        margin: {
          top: 20,
          right: 20,
          bottom: 40,
          left: 55
        },
        x: function(d) {
          return d.x;
        },
        y: function(d) {
          return d.y;
        },
        useInteractiveGuideline: true,
        xAxis: {
          axisLabel: "Date",
          tickFormat: function(d) {
            return d3.time.format("%y/%m/%d")(new Date(d));
          },
          showMaxMin: true,
          staggerLabels: true
        },
        yAxis: {
          axisLabel: "Price",
          tickFormat: function(d) {
            return d3.format(",.03f")(d);
          },
          axisLabelDistance: 20
        }
      }
    };
    this.received_json = {
      Status: "OK",
      result: {
        N: "[timeStr,Open ,Price ,Low ,High ,Volume ]",
        V: [
          ["2015-08-10", "1.03", "1.06", "1.02", "1.09", "11460723"],
          ["2015-08-09", "1.07", "1.04", "1.02", "1.07", "7247576"],
          ["2015-08-04", "1.12", "1.12", "1.10", "1.15", "7677820"],
          ["2015-08-03", "1.09", "1.10", "1.08", "1.12", "7027935"],
          ["2015-08-02", "1.11", "1.11", "1.08", "1.13", "9750688"],
          ["2015-07-30", "1.12", "1.13", "1.10", "1.15", "11241129"],
          ["2015-07-29", "1.09", "1.10", "1.07", "1.13", "14960552"],
          ["2015-07-28", "1.01", "1.06", "1.00", "1.10", "14675758"],
          ["2015-07-27", "1.02", "1.01", "1.00", "1.04", "7912341"],
          ["2015-07-26", "1.02", "1.03", "1.00", "1.05", "9533645"],
          ["2015-07-22", "0.97", "0.99", "0.96", "1.02", "7621952"],
          ["2015-07-21", "0.97", "0.97", "0.95", "0.98", "4291792"],
          ["2015-07-16", "0.97", "0.96", "0.95", "0.98", "6313929"],
          ["2015-07-15", "0.91", "0.94", "0.90", "0.97", "7460342"],
          ["2015-07-14", "0.90", "0.91", "0.90", "0.91", "2628452"],
          ["2015-07-13", "0.92", "0.90", "0.89", "0.92", "2264517"],
          ["2015-07-12", "0.92", "0.92", "0.89", "0.94", "5295729"],
          ["2015-07-09", "0.91", "0.91", "0.90", "0.93", "3880665"],
          ["2015-07-08", "0.92", "0.90", "0.87", "0.93", "9047738"],
          ["2015-07-07", "0.94", "0.92", "0.90", "0.94", "4387652"],
          ["2015-07-06", "0.95", "0.93", "0.90", "0.96", "4769501"],
          ["2015-07-05", "1.02", "0.99", "0.96", "1.03", "4745938"],
          ["2015-07-02", "0.99", "1.00", "0.98", "1.03", "2768992"],
          ["2015-06-29", "1.03", "1.01", "0.99", "1.04", "7020743"],
          ["2015-06-28", "1.05", "1.05", "1.02", "1.07", "5668145"],
          ["2015-06-25", "0.97", "1.01", "0.96", "1.04", "5029738"],
          ["2015-06-24", "0.98", "0.98", "0.96", "1.00", "3588419"],
          ["2015-06-23", "0.97", "0.96", "0.95", "0.98", "3560574"],
          ["2015-06-22", "0.97", "0.97", "0.95", "0.97", "3675084"],
          ["2015-06-21", "0.96", "0.97", "0.96", "0.98", "3478152"],
          ["2015-06-18", "0.95", "0.95", "0.95", "0.95", "940257"],
          ["2015-06-17", "0.96", "0.95", "0.94", "0.96", "2602923"],
          ["2015-06-16", "0.94", "0.95", "0.93", "0.97", "2839330"],
          ["2015-06-15", "0.94", "0.93", "0.92", "0.94", "2062793"],
          ["2015-06-14", "0.96", "0.94", "0.92", "0.96", "3519594"],
          ["2015-06-11", "0.96", "0.96", "0.95", "0.97", "2299716"],
          ["2015-06-10", "1.00", "0.98", "0.96", "1.02", "4743052"],
          ["2015-06-09", "0.96", "0.98", "0.95", "1.00", "6767556"],
          ["2015-06-08", "0.98", "0.97", "0.95", "1.00", "3615106"],
          ["2015-06-07", "1.01", "0.99", "0.97", "1.01", "5767166"],
          ["2015-06-04", "1.04", "1.02", "1.01", "1.04", "5226201"],
          ["2015-06-03", "1.05", "1.04", "1.02", "1.07", "7115023"],
          ["2015-06-02", "1.02", "1.04", "1.01", "1.06", "4167874"],
          ["2015-06-01", "1.06", "1.05", "1.01", "1.08", "7800140"],
          ["2015-05-31", "1.06", "1.04", "1.03", "1.06", "6416663"],
          ["2015-05-28", "1.09", "1.08", "1.04", "1.11", "9092337"],
          ["2015-05-27", "1.12", "1.12", "1.09", "1.14", "11772417"],
          ["2015-05-26", "1.05", "1.10", "1.05", "1.14", "17945109"],
          ["2015-05-25", "1.06", "1.05", "1.03", "1.07", "11573992"],
          ["2015-05-24", "1.05", "1.05", "1.04", "1.07", "11475579"],
          ["2015-05-21", "0.97", "1.02", "0.97", "1.05", "12427985"],
          ["2015-05-20", "0.96", "0.96", "0.94", "0.98", "5238345"],
          ["2015-05-19", "0.99", "0.97", "0.95", "1.00", "6811500"],
          ["2015-05-18", "0.86", "0.92", "0.86", "0.94", "3006212"],
          ["2015-05-17", "0.86", "0.86", "0.83", "0.89", "1890858"],
          ["2015-05-14", "0.90", "0.87", "0.85", "0.90", "5469743"],
          ["2015-05-13", "0.94", "0.91", "0.89", "0.94", "5003330"],
          ["2015-05-12", "0.94", "0.94", "0.93", "0.94", "2564300"],
          ["2015-05-11", "0.96", "0.95", "0.93", "0.97", "3510884"],
          ["2015-05-10", "0.96", "0.95", "0.94", "0.97", "2023461"],
          ["2015-05-07", "0.97", "0.97", "0.95", "0.98", "4066494"],
          ["2015-05-06", "0.98", "0.98", "0.97", "1.00", "6945586"],
          ["2015-05-05", "0.96", "0.97", "0.96", "0.99", "6041972"],
          ["2015-05-04", "0.94", "0.95", "0.93", "0.97", "3316689"],
          ["2015-05-03", "0.98", "0.95", "0.93", "0.98", "3579497"],
          ["2015-04-30", "0.97", "0.98", "0.95", "1.01", "8915705"],
          ["2015-04-29", "0.94", "0.95", "0.91", "0.99", "5290696"],
          ["2015-04-28", "0.94", "0.92", "0.91", "0.94", "3560334"],
          ["2015-04-27", "0.99", "0.96", "0.92", "1.00", "4442140"],
          ["2015-04-26", "1.01", "1.01", "0.99", "1.02", "4563818"],
          ["2015-04-23", "1.02", "1.02", "1.01", "1.03", "2355209"],
          ["2015-04-22", "1.00", "1.01", "0.99", "1.03", "3207388"],
          ["2015-04-21", "1.01", "1.00", "0.99", "1.02", "3858930"],
          ["2015-04-20", "1.02", "1.01", "0.99", "1.02", "3842541"],
          ["2015-04-19", "1.04", "1.03", "1.01", "1.05", "3601585"],
          ["2015-04-16", "1.02", "1.03", "1.02", "1.04", "1707411"],
          ["2015-04-15", "1.04", "1.03", "1.02", "1.05", "5197910"],
          ["2015-04-14", "1.05", "1.05", "1.03", "1.06", "3576591"],
          ["2015-04-09", "1.05", "1.04", "1.03", "1.05", "2632903"],
          ["2015-04-08", "1.03", "1.04", "1.02", "1.06", "5404756"],
          ["2015-04-07", "1.05", "1.05", "1.03", "1.05", "3601122"],
          ["2015-04-06", "1.02", "1.02", "0.99", "1.05", "7860342"],
          ["2015-04-05", "1.06", "1.03", "1.01", "1.06", "7787807"],
          ["2015-04-02", "1.10", "1.07", "1.05", "1.11", "5854078"],
          ["2015-04-01", "1.10", "1.11", "1.08", "1.13", "6277105"],
          ["2015-03-31", "1.11", "1.10", "1.08", "1.12", "5862581"],
          ["2015-03-30", "1.06", "1.09", "1.05", "1.12", "7378222"],
          ["2015-03-29", "1.09", "1.07", "1.05", "1.09", "5070635"],
          ["2015-03-26", "1.07", "1.06", "1.03", "1.08", "6448218"],
          ["2015-03-25", "1.12", "1.10", "1.08", "1.12", "8831826"],
          ["2015-03-24", "1.16", "1.14", "1.11", "1.17", "3810504"],
          ["2015-03-23", "1.15", "1.14", "1.13", "1.16", "8320971"],
          ["2015-03-22", "1.17", "1.15", "1.13", "1.17", "2518745"],
          ["2015-03-19", "1.19", "1.18", "1.16", "1.20", "3373653"],
          ["2015-03-18", "1.18", "1.17", "1.15", "1.18", "4737098"],
          ["2015-03-17", "1.18", "1.20", "1.17", "1.22", "5500203"],
          ["2015-03-16", "1.22", "1.20", "1.17", "1.23", "6914843"],
          ["2015-03-15", "1.25", "1.23", "1.21", "1.26", "4948635"],
          ["2015-03-12", "1.23", "1.23", "1.21", "1.25", "5761628"],
          ["2015-03-11", "1.24", "1.23", "1.21", "1.25", "6647293"],
          ["2015-03-10", "1.28", "1.27", "1.23", "1.30", "8860154"],
          ["2015-03-09", "1.25", "1.26", "1.24", "1.28", "8907906"],
          ["2015-03-08", "1.23", "1.24", "1.22", "1.26", "9793483"],
          ["2015-03-05", "1.22", "1.22", "1.20", "1.23", "4431043"],
          ["2015-03-04", "1.17", "1.20", "1.16", "1.23", "13222759"],
          ["2015-03-03", "1.17", "1.18", "1.16", "1.19", "7448232"],
          ["2015-03-02", "1.14", "1.16", "1.14", "1.19", "10058969"],
          ["2015-03-01", "1.12", "1.12", "1.10", "1.14", "8607452"],
          ["2015-02-26", "1.11", "1.11", "1.09", "1.13", "8785043"],
          ["2015-02-25", "1.14", "1.11", "1.10", "1.14", "4361031"],
          ["2015-02-24", "1.12", "1.14", "1.12", "1.17", "9740556"],
          ["2015-02-23", "1.12", "1.13", "1.11", "1.14", "10913767"],
          ["2015-02-22", "1.11", "1.10", "1.10", "1.12", "4452465"],
          ["2015-02-19", "1.14", "1.11", "1.09", "1.14", "7518777"],
          ["2015-02-18", "1.15", "1.13", "1.11", "1.15", "5288226"],
          ["2015-02-17", "1.13", "1.12", "1.09", "1.15", "9679604"],
          ["2015-02-16", "1.21", "1.17", "1.10", "1.22", "8486017"],
          ["2015-02-15", "1.23", "1.22", "1.21", "1.24", "2503777"],
          ["2015-02-12", "1.21", "1.21", "1.20", "1.23", "4891423"],
          ["2015-02-11", "1.24", "1.23", "1.20", "1.24", "4982473"],
          ["2015-02-10", "1.27", "1.25", "1.22", "1.28", "4222600"],
          ["2015-02-09", "1.26", "1.26", "1.24", "1.28", "4124323"],
          ["2015-02-08", "1.28", "1.27", "1.26", "1.29", "3270993"],
          ["2015-02-05", "1.29", "1.28", "1.27", "1.30", "4709721"],
          ["2015-02-04", "1.31", "1.31", "1.28", "1.33", "7529849"],
          ["2015-02-03", "1.28", "1.30", "1.28", "1.32", "7393768"],
          ["2015-02-02", "1.27", "1.27", "1.26", "1.28", "2106899"],
          ["2015-02-01", "1.29", "1.27", "1.26", "1.29", "4142523"]
        ]
      }
    };

    var v = [
      [1222747200000, 189.13661746552],
      [1225425600000, 149.46533007301],
      [1228021200000, 131.00340772114],
      [1230699600000, 135.18341728866],
      [1233378000000, 109.15296887173],
      [1235797200000, 84.61477254976],
      [1238472000000, 100.60810015326],
      [1241064000000, 141.5013489561],
      [1243742400000, 142.50405083675],
      [1246334400000, 139.81192372672],
      [1249012800000, 177.78205544583],
      [1251691200000, 194.73691933074],
      [1254283200000, 109.00838460225],
      [1256961600000, 198.1985587742],
      [1259557200000, 122.37102417812],
      [1262235600000, 134.2458108125],
      [1264914000000, 128.26087689346],
      [1267333200000, 148.8189512625],
      [1270008000000, 170.57301075186],
      [1272600000000, 192.6460432255],
      [1275278400000, 165.94088520518],
      [1277870400000, 137.82887467569],
      [1280548800000, 165.55973314204],
      [1283227200000, 148.30877330928],
      [1285819200000, 178.14870066912],
      [1288497600000, 192.69260960288],
      [1291093200000, 100.84263809599],
      [1293771600000, 126.17253914628],
      [1296450000000, 137.69335966505],
      [1298869200000, 139.73260965121]
    ];
    console.log(new Date(this.received_json.result.V[0][0]).getTime());

    // for (var inde = 0; inde < v.length; inde++) {
    //   console.log(new Date(v[inde][0]));
    // }

    var array_arry = [];
    // construcing array of arrays from json
    for (var index = 0; index < this.received_json.result.V.length; index++) {
      array_arry.push([new Date(this.received_json.result.V[index][0]).getTime(), Number(this.received_json.result.V[index][2])])
    }
    
    // console.log(array_arry);



    // console.log(Number(this.received_json.result.V[0][2]));
    for (var index = 0; index < v.length; index++) {
      console.log(new Date(this.received_json.result.V[index][0]).getTime());
      this.graph_x.push({
        x: new Date(this.received_json.result.V[index][0]).getTime(),
        y: Number(this.received_json.result.V[index][2])
      });
    }
    this.data = this.sinAndCos();
  }

  sinAndCos() {
    return [
      // {
      //   values: sin2,
      //   key: "Another sine wave",
      //   color: "#7777ff",
      //   area: true //area - set to true if you want this line to turn into a filled area chart.
      // },
      {
        // values: [
        //   [1222747200000, 189.13661746552],
        //   [1225425600000, 149.46533007301],
        //   [1228021200000, 131.00340772114],
        //   [1230699600000, 135.18341728866],
        //   [1233378000000, 109.15296887173],
        //   [1235797200000, 84.61477254976],
        //   [1238472000000, 100.60810015326],
        //   [1241064000000, 141.5013489561],
        //   [1243742400000, 142.50405083675],
        //   [1246334400000, 139.81192372672],
        //   [1249012800000, 177.78205544583],
        //   [1251691200000, 194.73691933074],
        //   [1254283200000, 109.00838460225],
        //   [1256961600000, 198.1985587742],
        //   [1259557200000, 122.37102417812],
        //   [1262235600000, 134.2458108125],
        //   [1264914000000, 128.26087689346],
        //   [1267333200000, 148.8189512625],
        //   [1270008000000, 170.57301075186],
        //   [1272600000000, 192.6460432255],
        //   [1275278400000, 165.94088520518],
        //   [1277870400000, 137.82887467569],
        //   [1280548800000, 165.55973314204],
        //   [1283227200000, 148.30877330928],
        //   [1285819200000, 178.14870066912],
        //   [1288497600000, 192.69260960288],
        //   [1291093200000, 100.84263809599],
        //   [1293771600000, 126.17253914628],
        //   [1296450000000, 137.69335966505],
        //   [1298869200000, 139.73260965121]
        // ],
        values: this.graph_x,
        key: "Graph",
        color: "#2ca02c",
        area: true //area - set to true if you want this line to turn into a filled area chart.
      }
    ];
  }
}
